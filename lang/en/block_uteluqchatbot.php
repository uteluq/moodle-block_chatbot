<?php
/**
 * @copyright 2025 Université TÉLUQ and the UNIVERSITÉ GASTON BERGER DE SAINT-LOUIS
 */
$string['pluginname'] = 'uteluqchatbot';
$string['uteluqchatbot:addinstance'] = 'Add a new chatbot block';
$string['uteluqchatbot:myaddinstance'] = 'Add a new chatbot block to Dashboard';
$string['adobe_pdf_client_id'] = 'Adobe PDF Services Client ID';
$string['adobe_pdf_client_id_desc'] = 'Enter your Adobe PDF Services Client ID here.';
$string['adobe_pdf_client_secret'] = 'Adobe PDF Services Client Secret';
$string['adobe_pdf_client_secret_desc'] = 'Enter your Adobe PDF Services Client Secret here.';
$string['weaviate_api_url'] = 'Weaviate API URL';
$string['weaviate_api_url_desc'] = 'Enter the URL for the Weaviate API here.';
$string['weaviate_api_key'] = 'Weaviate API Key';
$string['weaviate_api_key_desc'] = 'Enter your Weaviate API key here.';
$string['weaviate_cohere_not_configured'] = 'Cohere API key is either not configured or invalid. Please check the settings.';
$string['cohere_embedding_api_key'] = 'Cohere Embedding Model API Key';
$string['cohere_embedding_api_key_desc'] = 'Enter your API key for the Cohere Embedding Model here.';
$string['test_api_keys'] = 'Test API Keys';
$string['test_api_keys_desc'] = 'Click to test the configured API keys';
$string['test_api_keys_label'] = 'Test Keys';
$string['uteluqchatbot:manage'] = 'Manage chatbot settings';
$string['test_api_keys'] = "Test API Keys";
$string['adobe_invalid_credentials'] = "The client ID or client secret for Adobe PDF Services is invalid.";
$string['adobe_valid_credentials'] = "The client ID and client secret for Adobe PDF Services are valid and functional.";
$string['weaviate_connection_error'] = "Connection error to Weaviate: ";
$string['weaviate_invalid_key_or_url'] = "The Weaviate API URL or key is invalid or an error occurred. Error code: ";
$string['weaviate_valid_key_and_url'] = "The Weaviate API URL and key are valid and functional.";
$string['database_write_error'] = "Database write error: ";
$string['invalid_question_after_sanitize'] = 'Invalid question after sanitization.';
$string['error_saving_conversation'] = 'Error saving conversation';
$string['empty_response_from_api'] = 'Empty response received from API';
$string['failed_to_obtain_access_token'] = "Failed to obtain access token. HTTP Status: ";
$string['access_token_obtained_successfully'] = "Access Token obtained successfully.";
$string['failed_to_obtain_access_token_response'] = "Failed to obtain access token. Response: ";
$string['failed_to_obtain_upload_uri'] = "Failed to obtain upload URI. HTTP Status: ";
$string['asset_upload_uri_obtained'] = "Asset upload URI obtained.";
$string['failed_to_obtain_upload_uri_response'] = "Failed to obtain upload URI. Response: ";
$string['failed_to_upload_file'] = "Failed to upload file. HTTP Status: ";
$string['file_uploaded_successfully'] = "File uploaded successfully.";
$string['job_created_successfully'] = "Job created successfully. Location: ";
$string['bad_request'] = "Bad Request. The request was invalid or cannot be otherwise served.";
$string['unauthorized'] = "Unauthorized. Check your API credentials.";
$string['resource_not_found'] = "Resource Not Found. The specified resource was not found.";
$string['quota_exceeded'] = "Quota Exceeded. You have exceeded your quota for this operation.";
$string['internal_server_error'] = "Internal Server Error. The server encountered an error and is unable to process your request at this time.";
$string['unexpected_http_status'] = "Unexpected HTTP Status: ";
$string['failed_to_get_job_status'] = "Failed to get job status. HTTP Status: ";
$string['job_status'] = "Job status: ";
$string['job_completed_successfully'] = "Job completed successfully. Download URI: ";
$string['job_completed_but_download_uri_missing'] = "Job completed but download URI is missing in the response.";
$string['job_in_progress'] = "Job is still in progress. Continue polling...";
$string['job_failed'] = "Job failed.";
$string['failed_to_decode_json_response'] = "Failed to decode JSON response or status field is missing. Response: ";
$string['failed_to_download_asset'] = "Failed to download asset. HTTP Status: ";
$string['asset_downloaded_successfully'] = "Asset downloaded successfully.";
$string['error_decoding_json_file'] = "Error decoding JSON file.";
$string['failed_to_obtain_access_token'] = "Failed to obtain access token. HTTP Status: ";
$string['access_token_obtained_successfully'] = "Access Token obtained successfully.";
$string['failed_to_obtain_access_token_response'] = "Failed to obtain access token. Response: ";
$string['failed_to_obtain_upload_uri'] = "Failed to obtain upload URI. HTTP Status: ";
$string['asset_upload_uri_obtained'] = "Asset upload URI obtained.";
$string['failed_to_obtain_upload_uri_response'] = "Failed to obtain upload URI. Response: ";
$string['failed_to_upload_file'] = "Failed to upload file. HTTP Status: ";
$string['file_uploaded_successfully'] = "File uploaded successfully.";
$string['job_created_successfully'] = "Job created successfully. Location: ";
$string['bad_request'] = "Bad Request. The request was invalid or cannot be served.";
$string['unauthorized'] = "Unauthorized. Check your API credentials.";
$string['resource_not_found'] = "Resource Not Found. The specified resource was not found.";
$string['quota_exceeded'] = "Quota Exceeded. You have exceeded your quota for this operation.";
$string['internal_server_error'] = "Internal Server Error. The server encountered an error and is unable to process your request at this time.";
$string['unexpected_http_status'] = "Unexpected HTTP Status: ";
$string['failed_to_get_job_status'] = "Failed to get job status. HTTP Status: ";
$string['job_status'] = "Job status: ";
$string['job_completed_successfully'] = "Job completed successfully. Download URI: ";
$string['job_completed_but_download_uri_missing'] = "Job completed but download URI is missing in the response.";
$string['job_in_progress'] = "Job is still in progress. Continue polling...";
$string['job_failed'] = "Job failed.";
$string['failed_to_decode_json_response'] = "Failed to decode JSON response or status field is missing. Response: ";
$string['failed_to_download_asset'] = "Failed to download asset. HTTP Status: ";
$string['asset_downloaded_successfully'] = "Asset downloaded successfully.";
$string['error_decoding_json_file'] = "Error decoding JSON file.";
$string['curl_error'] = "cURL Error: ";
$string['http_error'] = "HTTP Error ";
$string['json_decode_error'] = "JSON Decode Error: ";
$string['no_response_generated'] = "No response generated. Data received: ";
$string['previous_interactions_history'] = "History of previous interactions:";
$string['previous_question'] = "Previous question : ";
$string['answer'] = "Answer: ";
$string['file_not_found'] = "File not found: ";
$string['unable_to_read_file'] = "Unable to read the file";
$string['json_encode_error'] = "JSON Encode Error: ";
$string['failure_after_retries'] = "Failure after ";
$string['last_error'] = " attempts. Last error: HTTP ";
$string['invalid_response_format'] = 'Invalid response format.';
$string['http_code'] = 'HTTP Code: ';
$string['pluginname'] = "uteluqchatbot";
$string['default_prompt'] = <<<EOT
Situation Context
The learner is taking a course on [[ coursename ]]. Your role is to support them by providing accurate, relevant, and helpful answers adapted to their learning.

Mission
As an assistant, your mission is to help the learner understand concepts from the course on Course X by answering their questions using the provided context. [[ history ]]
You must provide clear, precise, and relevant responses, and only share information that comes from the course. If the answer cannot be found in the provided context, strictly respond with: "I am calibrated based on the course content carefully selected by your teacher. If you need more information, we encourage you to contact them."

If the learner writes phrases showing they have not understood a concept or a previous explanation, check [[ history ]] to identify what was misunderstood, then rephrase your explanation more simply with clearer examples.

Instructions
1. Analyze each question to detect emotional cues using the following taxonomy:
   - Confusion: "I don’t understand", "I’m lost", "It’s unclear".
   - Frustration: "This is annoying", "I give up", "It’s too hard".
   - Stress/Anxiety: "I’m stressed", "I’m overwhelmed", "There’s no time left".
   - Doubt/Insecurity: "I can’t do this", "I’m not good enough".

2. If an emotion is detected, begin your answer with an empathetic phrase:
   - Confusion: “I understand, it’s not easy.”
   - Frustration: “I see it’s frustrating.”
   - Stress: “It’s normal to feel overwhelmed sometimes.”
   - Doubt: “You’re doing your best, and that’s already great.”

3. Then reply clearly and with structure.  
4. Use examples where needed.  
5. Never give answers outside the provided context.

6. Integrate the 4 components of empathy (as defined in [Springer Table 1](https://link.springer.com/article/10.1007/s00146-023-01715-z/tables/1)):
   - Cognitive: Show understanding of the learner’s perspective and reformulate to confirm. Suggest ideas linked to what they said without imposing.
   - Affective: Be emotionally aware, validate their feelings, use kind words or simple metaphors.
   - Attitudinal: Warm, respectful, and supportive tone. Encourage effort, show openness, avoid judgment.
   - Attunement: Adapt language and style to the learner. Let them guide the discussion.

7. Maintain a kind, respectful, and motivating tone throughout the exchange.

New Question from Learner  
New learner question [[ question ]]
EOT;
$string['sending_question'] = "Sending the question...";
$string['error'] = "Error: ";
$string['error_sending_question'] = "Error sending the question: ";
$string['saving_prompt'] = "Saving the prompt...";
$string['prompt_saved_successfully'] = "Prompt saved successfully!";
$string['error_saving_prompt'] = "Error saving the prompt: ";
$string['uploading_file'] = "Uploading the file...";
$string['file_indexed_successfully'] = "File indexed successfully!";
$string['error_processing_file'] = "Error processing the file: ";
$string['add_files'] = "Add Files";
$string['text_or_pdf_files'] = "Text or PDF Files";
$string['drag_files_here_or_click'] = "Drag your files here or click to browse";
$string['cancel'] = "Cancel";
$string['upload_course'] = "Upload Course";
$string['file_size_exceeds_limit'] = 'File size exceeds 10MB limit';
$string['modify_prompt'] = "Modify";
$string['add_prompt'] = "Add";
$string['consult_guide'] = "Consult the guide to design effective prompts:";
$string['guide_link'] = "Guide for designing prompts for teachers";
$string['prompt_content'] = "Prompt Content";
$string['write_prompt_here'] = "Write your prompt here";
$string['cancel'] = "Cancel";
$string['save'] = "Save";
$string['back'] = 'Back';
$string['chatbot_with_toggle_buttons'] = "Chatbot with Toggle Buttons";
$string['hello_professor'] = "Hello Professor, you have the option to test the chatbot to ensure it works correctly and that your prompt is optimally configured.";
$string['hello_student'] = "Hello! I am your learning assistant. I can help you with: - Understanding course concepts - Reviewing and practicing exercises - Clarifying difficult points - Suggesting study methods. How can I assist you?";
$string['ask_your_question_here'] = "Ask your question here...";
$string['modify_prompt'] = "Modify Prompt";
$string['upload_course'] = "Upload Course";
$string['error_uploading_asset'] = 'Error uploading asset.';
$string['error_creating_job'] = 'Error creating job.';
$string['job_failed'] = 'Job failed.';
$string['error_processing_pdf'] = 'Error processing PDF.';
$string['json_encode_error'] = 'JSON encode error: ';
$string['privacy:metadata:block_uteluqchatbot_conversations'] = 'Information about user conversations with the chatbot';
$string['privacy:metadata:block_uteluqchatbot_conversations:userid'] = 'The ID of the user who created the conversation';
$string['privacy:metadata:block_uteluqchatbot_conversations:question'] = 'The question asked by the user';
$string['privacy:metadata:block_uteluqchatbot_conversations:answer'] = 'The answer provided by the chatbot';
$string['privacy:metadata:block_uteluqchatbot_conversations:timecreated'] = 'The time when the conversation was created';
$string['privacy:metadata:block_uteluqchatbot_conversations:courseid'] = 'The ID of the course where the conversation took place';
$string['privacy:metadata:block_uteluqchatbot_prompts'] = 'Information about custom prompts created by users';
$string['privacy:metadata:block_uteluqchatbot_prompts:prompt'] = 'The custom prompt text created by the user';
$string['privacy:metadata:block_uteluqchatbot_prompts:userid'] = 'The ID of the user who created the prompt';
$string['privacy:metadata:block_uteluqchatbot_prompts:courseid'] = 'The ID of the course where the prompt was created';
$string['privacy:metadata:block_uteluqchatbot_prompts:timecreated'] = 'The time when the prompt was created';
$string['privacy:metadata:cohere_api'] = 'Data sent to Cohere API service for AI-powered chat responses';
$string['privacy:metadata:cohere_api:question'] = 'The user question sent to Cohere API for processing';
$string['privacy:metadata:cohere_api:courseid'] = 'The course context information sent to Cohere API';
$string['privacy:metadata:cohere_api:prompt'] = 'Custom prompts and system instructions sent to Cohere API';
$string['privacy:metadata:weaviate_cloud'] = 'Data sent to Weaviate Cloud vector database for document storage and similarity search';
$string['privacy:metadata:weaviate_cloud:document_content'] = 'Text content extracted from uploaded documents stored in Weaviate';
$string['privacy:metadata:weaviate_cloud:embeddings'] = 'Vector embeddings generated from document content stored in Weaviate';
$string['privacy:metadata:weaviate_cloud:courseid'] = 'Course context information associated with stored documents';
$string['privacy:metadata:weaviate_cloud:metadata'] = 'Document metadata and properties stored in Weaviate database';
$string['privacy:metadata:adobe_pdf_api'] = 'Data sent to Adobe PDF Services API for text extraction from PDF documents';
$string['privacy:metadata:adobe_pdf_api:pdf_content'] = 'PDF file content sent to Adobe PDF Services for text extraction';
$string['privacy:metadata:adobe_pdf_api:filename'] = 'Original filename of the PDF document sent for processing';
$string['privacy:metadata:adobe_pdf_api:extracted_text'] = 'Text content extracted from PDF documents by Adobe PDF Services';
$string['pluginname'] = 'TÉLUQ Chatbot';
$string['conversations'] = 'Conversations';
$string['prompts'] = 'Custom Prompts';
$string['no_files_selected'] = 'No files selected';
$string['course_id'] = 'Course ID';
$string['file_name'] = 'File name';
$string['file_content_base64'] = 'File content (base64 encoded)';
$string['insufficient_permissions'] = 'Insufficient permissions to upload files';
$string['missing_api_configuration'] = 'Missing required API configuration';
$string['weaviate_connector_not_found'] = 'WeaviateConnector class not found';
$string['collection_prefix'] = 'Collection_course_';
$string['error_creating_collection'] = 'Error creating collection: ';
$string['unknown_error'] = 'Unknown error';
$string['failed_create_upload_directory'] = 'Failed to create upload directory';
$string['empty_filename'] = 'Empty filename provided';
$string['unsupported_file_type'] = 'Unsupported file type: ';
$string['invalid_file_data'] = 'Invalid file data for: ';
$string['failed_save_file'] = 'Failed to save file: ';
$string['adobe_pdf_credentials_not_configured'] = 'Adobe PDF API credentials not configured';
$string['pdf_extractor_not_found'] = 'PDF extractor class not found';
$string['failed_extract_pdf_text'] = 'Failed to extract text from PDF: ';
$string['failed_save_extracted_text'] = 'Failed to save extracted text file: ';
$string['error_indexing_file_unknown'] = 'Error indexing file ';
$string['files_indexed_successfully'] = ' file(s) indexed successfully';
$string['errors_occurred'] = '. Errors: ';
$string['no_files_processed'] = 'No files processed. Errors: ';
$string['operation_successful'] = 'Operation successful';
$string['response_message'] = 'Response message';
$string['processed_files_count'] = 'Number of processed files';
$string['sending_question_fallback'] = 'Sending the question...';
$string['error_colon_fallback'] = 'Error: ';
$string['error_sending_question_fallback'] = 'Error sending the question: ';
$string['saving_prompt_fallback'] = 'Saving the prompt...';
$string['prompt_saved_successfully_fallback'] = 'Prompt saved successfully!';
$string['error_saving_prompt_fallback'] = 'Error saving the prompt: ';
$string['no_files_selected_fallback'] = 'No files selected.';
$string['uploading_files_fallback'] = 'Uploading files...';
$string['files_indexed_successfully_fallback'] = 'Files indexed successfully!';
$string['error_processing_files_fallback'] = 'Error processing files: ';
$string['unknown_error_occurred'] = 'An unknown error occurred';
$string['server_response_error'] = 'Server response error. Check console for details.';
$string['server_error_check_console'] = 'Server error - check console for details';
$string['files_converted_debug'] = 'Files converted to base64:';
$string['sending_ajax_request_debug'] = 'Sending AJAX request:';
$string['upload_response_received_debug'] = 'Upload response received:';
$string['response_type_debug'] = 'Response type:';
$string['upload_error_details_debug'] = 'Upload error details:';
$string['error_object_debug'] = 'Error object:';
$string['raw_server_response_debug'] = 'Raw server response:';